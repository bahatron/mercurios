FROM node:lts-slim as src

WORKDIR /app/playground
COPY ./playground/package.json .

WORKDIR /app/client
COPY ./client/package.json .

WORKDIR /app/client
RUN npm install
WORKDIR /app/playground
RUN npm install

WORKDIR /app/client
COPY ./client .
RUN npm run build

WORKDIR /app/playground
COPY ./playground .
EXPOSE 8080